<!DOCTYPE html>
<html>
<head>
    <script src="https://unpkg.com/htmx.org@1.9.10"></script>
</head>
<body>
    <h1>Verification of Notification Trigger</h1>

    <!-- This element mimics the one in base_creation.html -->
    <div id="notification-panel-content-creation"
         hx-get="/mock-notifications"
         hx-trigger="refreshNotifications from:body"
         hx-swap="innerHTML">
         Initial Content
    </div>

    <div id="status">Waiting...</div>

    <script>
        // Log when HTMX tries to issue a request
        document.body.addEventListener('htmx:beforeRequest', function(evt) {
            document.getElementById('status').innerText = 'HTMX Request Triggered!';
            evt.preventDefault(); // Stop actual request
        });

        // The logic I implemented in static/js/notifications.js
        function simulateNotificationEvent() {
            console.log("Dispatching event on document.body");
            document.body.dispatchEvent(new CustomEvent('refreshNotifications'));
        }
    </script>
</body>
</html>
